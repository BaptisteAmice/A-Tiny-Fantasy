[gd_scene load_steps=20 format=4 uid="uid://c7ho8gxtkvxyg"]

[ext_resource type="Script" uid="uid://cdrshfxrhkobf" path="res://Worlds/world.gd" id="1_osawv"]
[ext_resource type="Script" uid="uid://ggihq82b8v8s" path="res://NetworkManager/multiplayer_spawner.gd" id="2_d11ax"]
[ext_resource type="PackedScene" uid="uid://d08gn81f5b74p" path="res://Players/Player.tscn" id="3_8djc0"]
[ext_resource type="Script" uid="uid://de08o2tf6o31y" path="res://Worlds/TileMap/tile_map.gd" id="4_7yxei"]
[ext_resource type="Texture2D" uid="uid://cqjwuvkvsud2i" path="res://Assets/Placeholders/Stone_Block_placed_wall.webp" id="4_ysegl"]
[ext_resource type="Texture2D" uid="uid://c6tiutygjqgf6" path="res://Assets/Placeholders/Stone_Block_placed_ground.webp" id="4_ywvb4"]
[ext_resource type="PackedScene" uid="uid://cm484nbkovv0n" path="res://InventorySystem/Inventory/inventory.tscn" id="6_4reng"]
[ext_resource type="FontFile" uid="uid://cslyoid86no3o" path="res://Assets/Tiopalada/tinyRPGFontKit01_v1_2/TinyRPG-BadgeFont.ttf" id="6_m7av2"]
[ext_resource type="Script" uid="uid://dm22dklxlpg53" path="res://Worlds/player_selection.gd" id="6_p83nl"]
[ext_resource type="Script" uid="uid://c2t8qhqvtygel" path="res://InventorySystem/Inventory/inventory_interface.gd" id="6_pu5gi"]
[ext_resource type="PackedScene" uid="uid://tft8q4g3amu6" path="res://Characters/enemy_skeleton.tscn" id="7_fc1d8"]
[ext_resource type="PackedScene" uid="uid://8irnp68kgu1a" path="res://InventorySystem/Inventory/slot.tscn" id="8_esbd5"]
[ext_resource type="PackedScene" uid="uid://e8x2i0ukn5tc" path="res://Interactables/chest.tscn" id="9_sp2ln"]
[ext_resource type="PackedScene" uid="uid://d2td87qjw6n1x" path="res://InventorySystem/Inventory/hot_bar_inventory.tscn" id="11_473q8"]
[ext_resource type="PackedScene" uid="uid://dbkewafchkam1" path="res://InventorySystem/Item/PickUp/pick_up.tscn" id="13_eqiri"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ywvb4"]
texture = ExtResource("4_ysegl")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0

[sub_resource type="TileSet" id="TileSet_ywvb4"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_ywvb4")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_p83nl"]
texture = ExtResource("4_ywvb4")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-27.947445, 32, -28.193138, -27.8246, 32, -28.438831, 32, -32, -32, -32, -32, 32)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -28.17334, 32, -28.17334, 32, -32, -32, -32)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(27.86876, 32, 32, 32, 32, -32, -32, -32, -32, -28.071815, 27.767235, -27.868763)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-28.274864, 32, -28.173338, -32, -32, -32, -32, 32)
1:1/0 = 0
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(27.870674, 32, 28.167961, -32, 32, -32, 32, 32)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-28.193138, -32, -32, -32, -32, 32, 32, 32, 32, 28.315987, -28.070293, 27.8246)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, 28.39608, -32, 32, 32, 32, 32, 28.049362)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, 29.175903, -32, 32, 32, 32, 32, -32, 27.947449, -32, 27.947449, 27.701752)
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0

[sub_resource type="TileSet" id="TileSet_ysegl"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_p83nl")

[node name="World" type="Node2D"]
script = ExtResource("1_osawv")

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("uid://d08gn81f5b74p", "uid://tft8q4g3amu6")
spawn_path = NodePath("..")
script = ExtResource("2_d11ax")
network_player = ExtResource("3_8djc0")

[node name="WorldTileMap" type="Node2D" parent="."]
script = ExtResource("4_7yxei")

[node name="Walls" type="TileMapLayer" parent="WorldTileMap"]
z_index = 9
tile_set = SubResource("TileSet_ywvb4")

[node name="Ground" type="TileMapLayer" parent="WorldTileMap"]
tile_map_data = PackedByteArray("AAD///3/AAAAAAEAAAD///7/AAAAAAEAAAD/////AAAAAAEAAAD//wAAAAAAAAEAAAD//wEAAAAAAAEAAAD//wIAAAAAAAEAAAD//wMAAAAAAAIAAAD///z/AAAAAAEAAAD///v/AAAAAAEAAAD///r/AAAAAAEAAAD///n/AAAAAAAAAAAAAPn/AAABAAAAAAABAPn/AAABAAAAAAACAPn/AAABAAAAAAADAPn/AAABAAAAAAAEAPn/AAABAAAAAAAFAPn/AAABAAAAAAAGAPn/AAABAAAAAAAHAPn/AAABAAAAAAAIAPn/AAABAAAAAAAJAPn/AAABAAAAAAAKAPn/AAABAAAAAAALAPn/AAABAAAAAAAMAPn/AAABAAAAAAANAPn/AAACAAAAAAANAPr/AAACAAEAAAANAPv/AAACAAEAAAANAPz/AAACAAEAAAANAP3/AAACAAEAAAANAP7/AAACAAEAAAANAP//AAACAAEAAAANAAAAAAACAAEAAAANAAEAAAACAAEAAAANAAMAAAACAAIAAAANAAIAAAACAAEAAAAMAAMAAAABAAIAAAALAAMAAAABAAIAAAAKAAMAAAABAAIAAAAJAAMAAAABAAIAAAAIAAMAAAABAAIAAAAHAAMAAAABAAIAAAAGAAMAAAABAAIAAAAFAAMAAAABAAIAAAAEAAMAAAABAAIAAAADAAMAAAABAAIAAAACAAMAAAABAAIAAAABAAMAAAABAAIAAAAAAAMAAAABAAIAAAD//wQAAAAAAAMAAAD//wUAAAAAAAQAAAD//wYAAAAAAAUAAAD//wcAAAAAAAYAAAAMAAQAAAABAAMAAAAMAAUAAAABAAQAAAAMAAYAAAABAAUAAAAMAAcAAAABAAYAAAALAAQAAAABAAMAAAALAAUAAAABAAQAAAALAAYAAAABAAUAAAALAAcAAAABAAYAAAAKAAQAAAABAAMAAAAKAAUAAAABAAQAAAAKAAYAAAABAAUAAAAKAAcAAAABAAYAAAAJAAQAAAABAAMAAAAJAAUAAAABAAQAAAAJAAYAAAABAAUAAAAJAAcAAAABAAYAAAAIAAQAAAABAAMAAAAIAAUAAAABAAQAAAAIAAYAAAABAAUAAAAIAAcAAAABAAYAAAAHAAQAAAABAAMAAAAHAAUAAAABAAQAAAAHAAYAAAABAAUAAAAHAAcAAAABAAYAAAAGAAQAAAABAAMAAAAGAAUAAAABAAQAAAAGAAYAAAABAAUAAAAGAAcAAAABAAYAAAAFAAQAAAABAAMAAAAFAAUAAAABAAQAAAAFAAYAAAABAAUAAAAFAAcAAAABAAYAAAAEAAQAAAABAAMAAAAEAAUAAAABAAQAAAAEAAYAAAABAAUAAAAEAAcAAAABAAYAAAADAAQAAAABAAMAAAADAAUAAAABAAQAAAADAAYAAAABAAUAAAADAAcAAAABAAYAAAACAAQAAAABAAMAAAACAAUAAAABAAQAAAACAAYAAAABAAUAAAACAAcAAAABAAYAAAABAAQAAAABAAMAAAABAAUAAAABAAQAAAABAAYAAAABAAUAAAABAAcAAAABAAYAAAAAAAQAAAABAAMAAAAAAAUAAAABAAQAAAAAAAYAAAABAAUAAAAAAAcAAAABAAYAAAANAAQAAAACAAMAAAANAAUAAAACAAQAAAANAAYAAAACAAUAAAANAAcAAAACAAYAAAAAAPr/AAABAAEAAAABAPr/AAABAAEAAAACAPr/AAABAAEAAAADAPr/AAABAAEAAAAEAPr/AAABAAEAAAAFAPr/AAABAAEAAAAGAPr/AAABAAEAAAAHAPr/AAABAAEAAAAIAPr/AAABAAEAAAAJAPr/AAABAAEAAAAKAPr/AAABAAEAAAALAPr/AAABAAEAAAAMAPr/AAABAAEAAAAMAPv/AAABAAEAAAALAPv/AAABAAEAAAAKAPv/AAABAAEAAAAJAPv/AAABAAEAAAAIAPv/AAABAAEAAAAHAPv/AAABAAEAAAAGAPv/AAABAAEAAAAFAPv/AAABAAEAAAAEAPv/AAABAAEAAAADAPv/AAABAAEAAAACAPv/AAABAAEAAAABAPv/AAABAAEAAAAAAPv/AAABAAEAAAAAAPz/AAABAAEAAAABAPz/AAABAAEAAAACAPz/AAABAAEAAAADAPz/AAABAAEAAAAEAPz/AAABAAEAAAAFAPz/AAABAAEAAAAGAPz/AAABAAEAAAAHAPz/AAABAAEAAAALAPz/AAABAAEAAAAMAPz/AAABAAEAAAAMAP3/AAABAAEAAAAMAP7/AAABAAEAAAAMAP//AAABAAEAAAAMAAAAAAABAAEAAAAMAAEAAAABAAEAAAAMAAIAAAABAAEAAAALAAIAAAABAAEAAAAKAAIAAAABAAEAAAAJAAIAAAABAAEAAAAIAAIAAAABAAEAAAAHAAIAAAABAAEAAAAGAAIAAAABAAEAAAAFAAIAAAABAAEAAAAEAAIAAAABAAEAAAADAAIAAAABAAEAAAACAAIAAAABAAEAAAABAAIAAAABAAEAAAAAAAIAAAABAAEAAAAAAAEAAAABAAEAAAABAAEAAAABAAEAAAACAAEAAAABAAEAAAADAAEAAAABAAEAAAAEAAEAAAABAAEAAAAFAAEAAAABAAEAAAAGAAEAAAABAAEAAAAHAAEAAAABAAEAAAAIAAEAAAABAAEAAAAJAAEAAAABAAEAAAAKAAEAAAABAAEAAAALAAEAAAABAAEAAAALAAAAAAABAAEAAAAKAAAAAAABAAEAAAAJAAAAAAABAAEAAAAIAAAAAAABAAEAAAAHAAAAAAABAAEAAAAGAAAAAAABAAEAAAAFAAAAAAABAAEAAAAEAAAAAAABAAEAAAADAAAAAAABAAEAAAACAAAAAAABAAEAAAABAAAAAAABAAEAAAAAAAAAAAABAAEAAAAAAP//AAABAAEAAAABAP//AAABAAEAAAACAP//AAABAAEAAAADAP//AAABAAEAAAAEAP//AAABAAEAAAAFAP//AAABAAEAAAAGAP//AAABAAEAAAAHAP//AAABAAEAAAAIAP//AAABAAEAAAAJAP//AAABAAEAAAAKAP//AAABAAEAAAALAP//AAABAAEAAAALAP7/AAABAAEAAAAKAP7/AAABAAEAAAAJAP7/AAABAAEAAAAIAP7/AAABAAEAAAAHAP7/AAABAAEAAAAGAP7/AAABAAEAAAAFAP7/AAABAAEAAAAEAP7/AAABAAEAAAADAP7/AAABAAEAAAACAP7/AAABAAEAAAABAP7/AAABAAEAAAAAAP7/AAABAAEAAAAAAP3/AAABAAEAAAABAP3/AAABAAEAAAACAP3/AAABAAEAAAADAP3/AAABAAEAAAAEAP3/AAABAAEAAAAFAP3/AAABAAEAAAAGAP3/AAABAAEAAAAHAP3/AAABAAEAAAAIAP3/AAABAAEAAAAJAP3/AAABAAEAAAAKAP3/AAABAAEAAAALAP3/AAABAAEAAAAKAPz/AAABAAEAAAAJAPz/AAABAAEAAAAIAPz/AAABAAEAAAA=")
tile_set = SubResource("TileSet_ysegl")

[node name="InteractableLayer" type="Node2D" parent="WorldTileMap"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="InventoryInterface" type="Control" parent="CanvasLayer"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("6_pu5gi")

[node name="PlayerInventory" parent="CanvasLayer/InventoryInterface" instance=ExtResource("6_4reng")]
layout_mode = 0
offset_left = 10.0
offset_top = 10.0
offset_right = 50.0
offset_bottom = 50.0

[node name="EquipInventory" parent="CanvasLayer/InventoryInterface" instance=ExtResource("6_4reng")]
layout_mode = 0
offset_left = 450.0
offset_top = 10.0
offset_right = 490.0
offset_bottom = 50.0

[node name="ExternalInventory" parent="CanvasLayer/InventoryInterface" instance=ExtResource("6_4reng")]
visible = false
layout_mode = 0
offset_left = 596.0
offset_top = 195.0
offset_right = 636.0
offset_bottom = 235.0

[node name="GrabbedSlot" parent="CanvasLayer/InventoryInterface" instance=ExtResource("8_esbd5")]
visible = false
modulate = Color(1, 1, 1, 0.49803922)
self_modulate = Color(1, 1, 1, 0)
layout_mode = 0
offset_right = 64.0
offset_bottom = 64.0

[node name="GrabbedSlot2" parent="CanvasLayer/InventoryInterface" instance=ExtResource("8_esbd5")]
visible = false
modulate = Color(1, 1, 1, 0.49803922)
self_modulate = Color(1, 1, 1, 0)
layout_mode = 0
offset_right = 64.0
offset_bottom = 64.0

[node name="HotBarInventory" parent="CanvasLayer" instance=ExtResource("11_473q8")]
offset_left = 10.0
offset_top = 10.0
offset_right = 430.0
offset_bottom = 90.0

[node name="InGameMenu" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/InGameMenu"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="SaveButton" type="Button" parent="CanvasLayer/InGameMenu/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Save"

[node name="ExitButton" type="Button" parent="CanvasLayer/InGameMenu/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Exit"

[node name="CloseServerButton" type="Button" parent="CanvasLayer/InGameMenu/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Close server"

[node name="PlayerSelection" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchor_left = 0.499
anchor_top = 0.5
anchor_right = 0.499
anchor_bottom = 0.5
offset_left = -255.84802
offset_top = -324.0
offset_right = 184.15198
offset_bottom = 324.0
script = ExtResource("6_p83nl")

[node name="ScrollContainer" type="ScrollContainer" parent="CanvasLayer/PlayerSelection"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -160.0
offset_top = -323.0
offset_right = 160.0
offset_bottom = 323.0
grow_horizontal = 2
grow_vertical = 2
horizontal_scroll_mode = 0

[node name="CharacterSlotsVBoxContainer" type="VBoxContainer" parent="CanvasLayer/PlayerSelection/ScrollContainer"]
layout_mode = 2

[node name="ConnectedPlayersLabel" type="Label" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Connected players :"

[node name="Label" type="Label" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Choose your Character"

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer"]
layout_mode = 2

[node name="CreateCharacterLineEdit" type="LineEdit" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(150, 0)
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
placeholder_text = "Player name"

[node name="CreateCharacterButton" type="Button" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer/HBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Create character"

[node name="ErrorLabel" type="Label" parent="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.7786795, 0.015600187, 7.70092e-07, 1)
theme_override_fonts/font = ExtResource("6_m7av2")
text = "Error"

[node name="enemy_skeleton" parent="." instance=ExtResource("7_fc1d8")]
position = Vector2(202, 176)

[node name="Chest" parent="." instance=ExtResource("9_sp2ln")]
position = Vector2(51, 163)

[node name="PickUp" parent="." instance=ExtResource("13_eqiri")]
position = Vector2(197, 71)

[connection signal="drop_slot_data" from="CanvasLayer/InventoryInterface" to="." method="_on_inventory_interface_drop_slot_data"]
[connection signal="gui_input" from="CanvasLayer/InventoryInterface" to="CanvasLayer/InventoryInterface" method="_on_gui_input"]
[connection signal="visibility_changed" from="CanvasLayer/InventoryInterface" to="CanvasLayer/InventoryInterface" method="_on_visibility_changed"]
[connection signal="pressed" from="CanvasLayer/InGameMenu/VBoxContainer/SaveButton" to="." method="_on_save_button_pressed"]
[connection signal="pressed" from="CanvasLayer/InGameMenu/VBoxContainer/ExitButton" to="." method="_on_exit_button_pressed"]
[connection signal="pressed" from="CanvasLayer/InGameMenu/VBoxContainer/CloseServerButton" to="." method="_on_close_server_button_pressed"]
[connection signal="pressed" from="CanvasLayer/PlayerSelection/ScrollContainer/CharacterSlotsVBoxContainer/HBoxContainer/CreateCharacterButton" to="CanvasLayer/PlayerSelection" method="_on_create_character_button_pressed"]
